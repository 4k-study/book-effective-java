# Item 28. 배열보다 리스트를 사용하라

배열은 **공변**이다. 즉, 부모 타입이 변경되면 하위 타입이 영향을 받는다.

제네릭은 **불공변**이다. 즉, 다른 타입끼리 아무런 관계가 아니어서 서로 영향을 받지 않는다.

즉 배열의 타입이 달라 연산이 실패하는 것은 런타임에(부모 자식 관계에 한에서만) 제네릭의 실패는 컴파일에 이루어 진다.

Item 26에서 컴파일의 중요성에 대해 견해를 적었듯이, 컴파일 에러가 비교가 안되게 좋다.

다음으로 실체화다. 배열은 런타임 도중에 자신의 타입을 알고있다. 반면에 제네릭은 컴파일에서 검사한 뒤 런타임에서 타입을 소거한다. 이런 차이점 때문에 제네릭 배열은 생성할 수 없다. 

예를들어 제네릭 타입이 다른 두 배열을 생성하면, 런타임 시점에 제네릭이 소거되어 같은형으로 인식하여 CastException이 발생한다.

### 마무리

어떤 원소를 다룰지 모를땐 Object 클래스를 사용하여도 좋지만, 직접 형변환을 하는 과정에서 에러가 발생할 확률이 높다. 따라서 제네릭을 사용하여 오류 확률을 없엘 수 있다.

제네릭을 사용하면 잘 동작하지만, 컴파일러가 안전을 보장하지 못한다. 이럴땐  제네릭 대신 제네릭 List를 사용하면 더 느리지만 오류와 경고가 없이 사용할 수 있다.

예전에 멘토링을 받을 때 이런 사소한 성능 개선에 대해 질문을 했었는데, 현대 하드웨어는 워낙 좋으니 그런 생각 말고, 안정성을 무조건으로 생각하라는게 기억이 나는 부분이다.
