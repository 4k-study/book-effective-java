# Item 21. 인터페이스는 구현하는 쪽을 생각해 설계하라

자바 8 이후 인터페이스에 디폴트 메서드가 생겨 구현체의 변경 없이 메서드를 추가할 수 있다.

자바 7 이전까지 인터페이스는 변경은 없다는 가정으로 설계되어서 모든 상황에서 불변식을 해치지 않는 디폴트 메서드 작성은 어렵다.

디폴트 메서드가 불변식을 해치는 경우도 있다. 이에는 여러가지 방법이 있다.

- 메서드를 재정의 한다.
- 디폴트 메서드를 호출하기 전에 동기화 하도록 한다.

위의 방법이 모든 곳에 적용하기 어렵기도 하고, 버전이 업데이트됨에 따라서 항상 해결해줄 수 없다.

따라서 기존의 인터페이스에 디폴트 메서드를 추가하는 행위는 기존 구현체와 충돌 위험이 있기 때문에 심사숙고 해야한다. 반면에 새로운 인터페이스를 만드는 경우라면 표준적인 메서드 구현에 매우 유용하게 사용할 수 있다.

### 마무리

- 불변식을 해치는 코드를 찾아보려면 `Collection`  인터페이스의 removeIf 메서드를 찾아보자. `SynchronizedCollection` 은 removeIf를 구현하고 있지 않기 때문에 그대로 물려 받는다, Synchronized라는 이름값을 하지 못하게 된다.
- 인터페이스 설계는 세심한 주의를 기울여야 한다. 특히 기존의 인터페이스를 수정할 때 수많은 사이드 이펙트가 일어날 수 있으니, 처음 설계를 신중하게 하도록 하자.
- 새로운 인터페이스는 추상클래스와 동일하게 구현체를 만들어서 테스트해야 한다. 그래야 릴리즈 전에 문제를 수정할 수 있다.
