# Item 29. 이왕이면 제네릭 타입으로 만들라

## 배열을 사용하는 코드를 제네릭으로 변환하는 법

1. 배열 생성 시 Object → 제네릭 배열로 형 변환
    
    ```java
    private E[] elements = (E[]) new Object[DEFAULT_SIZE];
    ```
    
    - 컴파일러는 elements 가 타입 안전한지 알 수 없으므로, 개발자가 직접 확인해야 함
    - 타입 안전성을 확인했다면 @SuppressWarnings 로 경고를 숨김
    - 장점
        - 가독성이 좋음
        - 형변환을 배열 생성 시 한번만 해주면 됨
    - 단점
        - 배열의 런타임 시점과 컴파일 시점의 타입이 달라 힙 오염이 일어날 수 있음

1. 배열 원소 반환 시 Object → 제네릭 타입으로 형변환
    
    ```java
    E result = (E) elements[--size];
    ```
    
    - E 는 런타임 시점에 존재하지 않으므로 컴파일러는 런타임에 타입 안전한지 알 수 없으므로 개발자가 직접 증명해야 함
    - 장점
        - 힙 오염이 없음
    - 단점
        - 배열 원소를 읽을 때마다 형변환을 해야 함

## 제네릭 타입

- 타입 매개변수에 제약이 없음
    - 단, 원시 타입은 박싱하여 사용하여야 함
- 제약을 두고 싶다면 한정적 타입 매개변수를 사용하면 됨
