# Item 38. 확장할 수 있는 열거 타입이 필요하면 인터페이스를 사용하라.

타입안전 열거패턴만 사용하다가, enum의 등장으로 하나의 선택지가 더 생겼다. 전반적으로 보면 타입안전 열거패턴보다 enum의 사용성이 더 좋다.

전반적이라는 단어를 사용했기에 모든 상황에서 좋은건 아니다. 타입안전 열거패턴은 확장할 수 있다. 값을 가져다가 사용할 수 있다는 뜻이다. 반면에 enum은 그렇게 사용할 수 없다.

### 확장이 enum에 필요할까??

enum에 확장성을 불어넣게 된다면 설계와 구현이 매우 복잡해 지기 때문에 좋은 생각은 아니다. 뿐만 아니라 사용성도 좋지 않다. 그럼에도 계산기 같은 특수한 상황에선 매우 적절하게 사용할 수 있다.

Operation 인터페이스를 만들고, enum 클래스의 각 인스턴스가 이를 구현해 사칙연산을 하게 만들어 준다.

이렇게 하면 다른 계산식이 생겨도 코드를 추가하지 않아도 구현만 하면 된다.

### 단점은 없을까?

결론부터 말하자면 enum 타입끼리 구현을 상속할 수 없다. 따라서 코드 중복이 생기기 마련이다.

### 테스트 하는법

요새 개발을 하며 중요하게 느끼는 두가지는 클린 코드와 테스트다.

확장하는 enum 클래스는 테스트를 어떻게 해야할까? 이는 크게 두가지가 있다

- 한정적 타입 토큰
    
    ```sql
    private static <T extends Enum<T> & Operation> void test (
    		Class<T> opEnumType, double x, double y) {	...  }
    ```
    
    Enum 클래스이면서, Operation의 하위 클래스여야 한다는 뜻이다.
    
    enum의 원소 순회와, Operation의 하위타입임을 챙겨야 하기 때문
    
- 한정적 와일드카드 타입
    
    ```sql
    private static void test (Collection<? extends Operation> opSet, double x, double y) {
    	...
    }
    ```
    
    한정적 와일드 카드를 넘겨서 비교적 간단하고 유연하게 사용하는 방법이다. (구현 타입의 연산을 호출하는 방식) 이는 특정 연산에서 EnumSet, EnumMap을 사용하지 못한다.
